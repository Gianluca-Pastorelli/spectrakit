% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/makeComposite.R
\name{makeComposite}
\alias{makeComposite}
\title{Create a composite image grid with customizable labels and resizing}
\usage{
makeComposite(
  image_dir,
  custom_order,
  rows,
  cols,
  spacing = 15,
  resize_mode = c("none", "fit", "fill", "width", "height", "both"),
  labels = list(),
  label_settings = list(),
  desired_width = 15,
  width_unit = "cm",
  ppi = 300,
  output_file = "composite_output.tiff"
)
}
\arguments{
\item{image_dir}{Directory containing images}

\item{custom_order}{Character vector of filenames (use NA for blank slots)}

\item{rows}{Number of rows in the grid}

\item{cols}{Number of columns in the grid}

\item{spacing}{Spacing (in pixels) between tiles}

\item{resize_mode}{One of "none", "fit", "fill", "width", "height", "both":
- "none": keep each panel at original size
- "fit": scale each panel to fit within the smallest image dimensions (preserving aspect ratio)
- "fill": scale and crop each panel to exactly fill the smallest dimensions
- "width": resize to minimum width, keep original height
- "height": resize to minimum height, keep original width
- "both": force exact width and height (may distort aspect ratio)}

\item{labels}{A list of up to 4 character vectors, each corresponding to one label layer. Each vector must be the same length as the number of non-NA images. Use empty strings "" or NULL entries to omit specific labels.}

\item{label_settings}{A list of named lists, each specifying settings for a label:
- size: font size (e.g., 100)
- color: font color
- font: font family (e.g., "Arial")
- boxcolor: background color behind text (or NA for none)
- location: offset from gravity anchor (e.g., "+10+10")
- gravity: placement anchor (e.g., "northwest")
- weight: font weight (e.g., 400 = normal, 700 = bold)}

\item{desired_width}{Desired width of final image (in cm or px)}

\item{width_unit}{Either "cm" or "px"}

\item{ppi}{Resolution (pixels per inch) for output file}

\item{output_file}{Path to output TIFF file}
}
\value{
Saves a TIFF file to output_file
}
\description{
Create a composite image grid with customizable labels and resizing
}
\examples{
library(magick)

tmp_dir <- file.path(tempdir(), "spectrakit_imgs")
dir.create(tmp_dir, showWarnings = FALSE)

# Create and save img1
img1 <- image_blank(100, 100, "white")
img1 <- image_draw(img1)
symbols(50, 50, circles = 30, inches = FALSE, add = TRUE, bg = "red")
dev.off()
img1_path <- file.path(tmp_dir, "img1.png")
image_write(img1, img1_path)

# Create and save img2
img2 <- image_blank(100, 100, "white")
img2 <- image_draw(img2)
rect(20, 20, 80, 80, col = "blue", border = NA)
dev.off()
img2_path <- file.path(tmp_dir, "img2.png")
image_write(img2, img2_path)

# Create composite
makeComposite(
        image_dir = tmp_dir,
        custom_order = c("img1.png", "img2.png"),
        rows = 1,
        cols = 2,
        labels = list(c("Red Circle", "Blue Rectangle")),
        label_settings = list(
                list(size = 10, font = "Arial", color = "black", boxcolor = "white",
                     gravity = "northwest", location = "+10+10", weight = 400)
        ),
        resize_mode = "none",
        desired_width = 10,
        width_unit = "cm",
        ppi = 300,
        output_file = file.path(tmp_dir, "composite_example.tiff")
)

}
